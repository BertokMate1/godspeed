[gd_scene load_steps=13 format=3 uid="uid://bo3u2fs6q3awm"]

[ext_resource type="Script" uid="uid://k6bxev3bf0c5" path="res://scripts/main.gd" id="1_h2yge"]
[ext_resource type="Script" uid="uid://cqpfpawedmfer" path="res://scripts/player.gd" id="1_ig7tw"]
[ext_resource type="Script" uid="uid://dww14180ykl1t" path="res://scripts/enemy.gd" id="2_0xm2m"]

[sub_resource type="NavigationMesh" id="NavigationMesh_h2yge"]
vertices = PackedVector3Array(-12.0014, 0.487697, -9.5, -12.0014, 0.487697, 9.5, 11.9986, 0.487697, 9.5, 11.9986, 0.487697, -9.5)
polygons = [PackedInt32Array(3, 2, 0), PackedInt32Array(0, 2, 1)]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_7dm0k"]
sky_horizon_color = Color(0.662243, 0.671743, 0.686743, 1)
ground_horizon_color = Color(0.662243, 0.671743, 0.686743, 1)

[sub_resource type="Sky" id="Sky_ig7tw"]
sky_material = SubResource("ProceduralSkyMaterial_7dm0k")

[sub_resource type="Environment" id="Environment_0xm2m"]
background_mode = 2
sky = SubResource("Sky_ig7tw")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_0xm2m"]
height = 1.8

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_ig7tw"]
height = 1.2

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_h2yge"]
albedo_color = Color(1, 0.423529, 0.25098, 1)

[sub_resource type="CapsuleMesh" id="CapsuleMesh_1bvp3"]
material = SubResource("StandardMaterial3D_h2yge")

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_lquwl"]

[node name="Main" type="Node3D"]
script = ExtResource("1_h2yge")

[node name="stage" type="Node3D" parent="."]

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="stage"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.512303, 0)
navigation_mesh = SubResource("NavigationMesh_h2yge")

[node name="Floor" type="CSGBox3D" parent="stage/NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00140572, -0.512303, 0)
use_collision = true
size = Vector3(25, 1, 20)

[node name="CSGCombiner3D" type="CSGCombiner3D" parent="stage"]
use_collision = true

[node name="CSGBox3D2" type="CSGBox3D" parent="stage/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.16663, 2.19562, -0.25281)
size = Vector3(1.04004, 3.4624, 19.4964)

[node name="CSGCylinder3D" type="CSGCylinder3D" parent="stage/CSGCombiner3D/CSGBox3D2"]
transform = Transform3D(-1.65229e-07, -1, 0, 3.78, -4.37114e-08, 0, 0, 0, 2.34, -0.0313313, -1.26829, -0.0448594)
operation = 2
height = 1.33398
sides = 16

[node name="CSGBox3D3" type="CSGBox3D" parent="stage/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0188913, 2.22758, 9.80873)
size = Vector3(25.2695, 3.53101, 1)

[node name="CSGBox3D4" type="CSGBox3D" parent="stage/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.19467, 0.851235, -6.43923)
size = Vector3(11.689, 1.09375, 1)

[node name="CSGBox3D" type="CSGBox3D" parent="stage/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7.51042, 2.75473, 1.211)
size = Vector3(1, 0.9776, 16.3409)

[node name="CSGBox3D5" type="CSGBox3D" parent="stage/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0188913, 2.22758, -9.69079)
size = Vector3(25.2695, 3.53101, 1)

[node name="CSGBox3D6" type="CSGBox3D" parent="stage/CSGCombiner3D"]
transform = Transform3D(7.45058e-08, 0, 1, 0, 1, 0, -1, 0, 7.45058e-08, -12.8453, 2.22668, 0.0956706)
size = Vector3(20.4995, 3.53101, 1)

[node name="CSGBox3D7" type="CSGBox3D" parent="stage/CSGCombiner3D"]
transform = Transform3D(7.45058e-08, 0, 1, 0, 1, 0, -1, 0, 7.45058e-08, 12.5473, 2.22668, 0.0779256)
size = Vector3(20.4995, 3.53101, 1)

[node name="env" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 0)

[node name="WorldEnvironment" type="WorldEnvironment" parent="env"]
environment = SubResource("Environment_0xm2m")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="env"]
transform = Transform3D(-0.866025, -0.433013, 0.25, 0, 0.5, 0.866025, -0.5, 0.75, -0.433013, 0.185606, 7.59659, -1.83524)
shadow_enabled = true

[node name="player" type="CharacterBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.47, 1.8, -1.05)
script = ExtResource("1_ig7tw")

[node name="standing_collision_shape" type="CollisionShape3D" parent="player"]
shape = SubResource("CapsuleShape3D_0xm2m")
debug_color = Color(0.678431, 0.254902, 1, 0.917647)

[node name="crouching_collision_shape" type="CollisionShape3D" parent="player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.309964, 0)
shape = SubResource("CapsuleShape3D_ig7tw")
debug_color = Color(0, 0.0145753, 0.0174971, 0.984314)

[node name="head" type="Node3D" parent="player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.7, 0)

[node name="Camera3D" type="Camera3D" parent="player/head"]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 0, 0, 0)
fov = 80.0

[node name="RayCast3D" type="RayCast3D" parent="player"]
target_position = Vector3(0, 2, 0)

[node name="enemy" type="CharacterBody3D" parent="." groups=["enemy"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 8.53358, 1.77663, 0.0335131)
script = ExtResource("2_0xm2m")

[node name="MeshInstance3D" type="MeshInstance3D" parent="enemy"]
mesh = SubResource("CapsuleMesh_1bvp3")

[node name="CollisionShape3D" type="CollisionShape3D" parent="enemy"]
shape = SubResource("CapsuleShape3D_lquwl")

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="enemy"]
